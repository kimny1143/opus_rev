# OPUS プロンプト改善計画

## 1. 現状の課題

1. **MVPフォーカスの反映**
   - 現在のプロンプトドキュメントは、MVPの開発方針との明確な連携が不足
   - プロンプト例がMVPの具体的なユースケースと紐づいていない

2. **テスト方針との整合性**
   - Cypress統一という重要な方針が、プロンプトガイドラインに十分反映されていない
   - テスト関連のプロンプト例が具体的でない

3. **実践的なユースケース不足**
   - タグの使用例が抽象的で、実際のOPUSプロジェクトのコンテキストに即していない
   - チームメンバーが即座に活用できる具体例が少ない

## 2. 改善提案

### 2.1 MVPフォーカスの強化

1. **<context>タグの拡張**
   ```markdown
   <context>
   - 対象機能: 仕入明細書管理のMVP実装フェーズ
   - 開発期間: 5-6日
   - 優先度: 必須機能の実装に集中
   </context>
   ```

2. **<constraint>タグのMVP制約追加**
   ```markdown
   <constraint>
   - 大規模データ処理は対象外
   - セッション管理は最小限
   - セキュリティ機能は基本実装のみ
   </constraint>
   ```

### 2.2 Cypressテスト方針の統合

1. **テスト関連の<need>タグ例**
   ```markdown
   <need>
   - E2Eテスト: ログイン→仕入明細書作成→PDF出力の基本フロー
   - コンポーネントテスト: 必須入力項目の検証
   - テストデータ: モックの準備
   </need>
   ```

2. **テスト固有の<constraint>タグ**
   ```markdown
   <constraint>
   - テストフレームワーク: Cypressのみ使用可
   - テストカバレッジ: MVPの主要フローを優先
   - 環境変数: .env.test で管理
   </constraint>
   ```

### 2.3 実践的なユースケース追加

1. **仕入明細書管理のプロンプト例**
   ```markdown
   <context>
   仕入明細書の承認フローをMVPで実装する段階
   </context>

   <need>
   - 承認/差戻しの基本機能実装
   - シンプルなステータス管理
   - 最小限のバリデーション
   </need>

   <constraint>
   - 複雑な承認ルートは対象外
   - バリデーションは必須項目のみ
   </constraint>

   <reference path="docs/prompt/req_def.md" section="2.4">
   仕入明細書管理の基本要件を参照
   </reference>
   ```

2. **取引先管理のプロンプト例**
   ```markdown
   <context>
   取引先情報のCRUD機能をMVPで実装する段階
   </context>

   <need>
   - 基本的なCRUD操作の実装
   - シンプルなタグ付け機能
   - 最小限の検索機能
   </need>

   <constraint>
   - 高度なフィルタリングは対象外
   - タグは1-2個程度
   </constraint>

   <reference path="docs/prompt/mvp_instructions.md" section="1.2">
   取引先管理のMVP要件を参照
   </reference>
   ```

## 3. 実装計画

1. **フェーズ1: 基本構造の改善** (1日)
   - MVPフォーカスの文言追加
   - Cypressテスト方針の反映
   - タグ使用例の更新

2. **フェーズ2: ユースケース拡充** (1-2日)
   - 実践的なプロンプト例の作成
   - 各機能領域のテンプレート準備
   - チーム内レビュー実施

3. **フェーズ3: ドキュメント統合** (1日)
   - 既存ドキュメントとの整合性確認
   - リンク関係の整理
   - 最終調整とレビュー

## 4. 期待される効果

1. **開発効率の向上**
   - MVPフォーカスにより、本質的な機能実装に集中
   - 具体的なプロンプト例により、素早く適切な指示を作成可能

2. **品質の向上**
   - Cypress統一テスト方針の明確な反映
   - 一貫性のある制約管理

3. **チームコミュニケーションの改善**
   - 共通の理解と表現方法の確立
   - 効果的な情報共有の促進

## 5. 次のステップ

1. チームメンバーからのフィードバック収集
2. 実際の開発タスクでの試用と改善
3. 継続的なアップデートとメンテナンス体制の確立

---

本計画は、OPUSプロジェクトのMVP開発を成功に導くための重要な一歩となります。
プロンプトドキュメントの改善により、チーム全体の効率と品質の向上を目指します。