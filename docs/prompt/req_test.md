# テスト要件 (公式仕様) [Cypress限定]

本システムのすべてのテストは、Cypressで統一して行う。  
他のテストランナー(Jest, Vitestなど)や外部フレームワークの導入は厳禁。

---

## テストフレームワークの指定

- メインのテストランナー: **Cypress**  
  - E2E、UI、コンポーネントテストを含むすべてのテストを Cypress上でカバーする。
- JestやVitestなど、他フレームワークへの移行・併用は一切認めない。

---

## テスト環境と設定

1. テストはE2Eテスト＋コンポーネントテストの2つに大別されるが、いずれもCypressコマンドで実行する。  
2. 開発・ローカル用の .env.local 等とは別に、 `.env.test` を用意し、環境変数を分離管理する。  
3. CI（例: GitHub Actions）でも同じ .env.test を使い、秘匿情報やトークンは各自安全に管理。

---

## Cypress でのテスト運用

1. 画面描画や認証の検証を行うE2Eテストは `cypress/e2e/` に配置する。  
2. コンポーネント単体を検証する場合は `cypress/component/` 内でテストを書く。  
3. スクリーンショットやビデオは `cypress/screenshots/` と `cypress/videos/` に保存し、CIでの成果物として保管できるようにする。  
4. 並列実行やロードバランシングを行いたい場合は、Cypressの[Parallelization機能](https://docs.cypress.io/guides/guides/parallelization)を活用。

---

## 重要ルール

1. **Cypress以外のテストツールを使用しない**  
   - 既存のJestやVitest設定は破棄し、新規作成は行わない。  
2. **テストデータのモック化**  
   - 開発環境に干渉しない形で `cy.intercept()` やファイルベースのフィクスチャを活用する。  
3. **運用時の変更提案**  
   - 何らかの理由で新しいテストフレームワークを導入したい場合、必ず管理者の事前許可を得ること。  

---

## 結論

- テストは **Cypress** のみを用いて実施し、E2E・UI・コンポーネントテストすべてを包括的に行う。  
- .env.test による環境変数管理やAPIモックを一元化し、チーム開発を円滑に進める。  
- これが本プロジェクトにおける正式なテスト仕様であり、逸脱は許されない。
